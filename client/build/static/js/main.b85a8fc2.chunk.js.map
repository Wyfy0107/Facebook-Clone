{"version":3,"sources":["components/Login.js","components/Profile.js","components/Register.js","App.js","index.js"],"names":["Login","setAuth","useState","email","setEmail","password","setPassword","type","placeholder","onChange","e","target","value","onClick","alert","axios","post","then","res","data","catch","err","console","log","Profile","userInfo","setUserInfo","useEffect","get","Register","isRegister","setRegister","to","message","App","isAuthenticated","setAuthenticate","keepLoggedIn","document","cookie","split","className","exact","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"yQA2CeA,MAxCf,YAA6B,IAAZC,EAAW,EAAXA,QAAW,EACAC,mBAAS,MADT,mBACnBC,EADmB,KACZC,EADY,OAEMF,mBAAS,MAFf,mBAEnBG,EAFmB,KAETC,EAFS,KAoB1B,OACE,6BACE,qCACA,2BACEC,KAAK,OACLC,YAAY,QACZC,SAAU,SAAAC,GAAC,OAAIN,EAASM,EAAEC,OAAOC,UAEnC,6BACA,2BACEL,KAAK,WACLC,YAAY,WACZC,SAAU,SAAAC,GAAC,OAAIJ,EAAYI,EAAEC,OAAOC,UAEtC,6BACA,4BAAQC,QA/BE,WACZ,IAAKV,IAAUE,EAAU,OAAOS,MAAM,qCAEtCC,IACGC,KAAK,SAAU,CACdb,MAAOA,EACPE,SAAUA,IAEXY,MAAK,SAAAC,GACa,YAAbA,EAAIC,MACNlB,GAAQ,MAGXmB,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,QAkB1B,WCLSG,MA9Bf,YAA+B,IAAZvB,EAAW,EAAXA,QAAW,EACIC,mBAAS,MADb,mBACrBuB,EADqB,KACXC,EADW,KAqB5B,OAlBAC,qBAAU,WACRZ,IACGa,IAAI,gBACJX,MAAK,SAAAC,GAAG,OAAIQ,EAAYR,EAAIC,SAC5BC,OAAM,SAAAC,GACLpB,GAAQ,GACRa,MAAM,2BAET,IAWD,6BACE,4CACCW,EAAW,uCAAaA,EAAStB,OAAc,KAChD,4BAAQU,QAZG,WACbZ,GAAQ,GACRc,IACGC,KAAK,WACLC,MAAK,SAAAC,GAAG,OAAII,QAAQC,IAAIL,MACxBE,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,QAO1B,aCiBSQ,MAzCf,WAAqB,IAAD,EACQ3B,mBAAS,MADjB,mBACXC,EADW,KACJC,EADI,OAEcF,mBAAS,MAFvB,mBAEXG,EAFW,KAEDC,EAFC,OAGgBJ,oBAAS,GAHzB,mBAGX4B,EAHW,KAGCC,EAHD,KAmBlB,OAAOD,EACL,kBAAC,IAAD,CAAUE,GAAG,MAEb,6BACE,wCACA,2BACEzB,KAAK,OACLC,YAAY,QACZC,SAAU,SAAAC,GAAC,OAAIN,EAASM,EAAEC,OAAOC,UAEnC,6BACA,2BACEL,KAAK,WACLC,YAAY,WACZC,SAAU,SAAAC,GAAC,OAAIJ,EAAYI,EAAEC,OAAOC,UAEtC,6BACA,4BAAQC,QA/BK,WACf,IAAKV,IAAUE,EAAU,OAAOS,MAAM,qCACtCC,IACGC,KAAK,YAAa,CACjBb,MAAOA,EACPE,SAAUA,IAEXY,MAAK,SAAAC,GACJJ,MAAM,WACNiB,GAAY,MAEbX,OAAM,SAAAC,GAAG,OAAIP,MAAMO,EAAIY,cAoBxB,cCOSC,MAxCf,WAAgB,IAAD,EAC8BhC,oBAAS,GADvC,mBACNiC,EADM,KACWC,EADX,KAGbT,qBAAU,kBAAMU,MAAgB,IAEhC,IAAMA,EAAe,WACJC,SAASC,OACHC,MAAM,KAAK,IAE9BJ,GAAgB,IAIpB,OACE,yBAAKK,UAAU,OACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,KACfR,EACC,kBAAC,IAAD,CAAUH,GAAG,aAEb,kBAAC,EAAD,CAAO/B,QAASmC,KAIpB,kBAAC,IAAD,CAAOO,KAAK,YACTR,EACC,kBAAC,EAAD,CAASlC,QAASmC,IAElB,kBAAC,IAAD,CAAUJ,GAAG,OAIjB,kBAAC,IAAD,CAAOW,KAAK,aACV,kBAAC,EAAD,U,QClCVC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,KACE,kBAAC,EAAD,QAGJR,SAASS,eAAe,W","file":"static/js/main.b85a8fc2.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction Login({ setAuth }) {\r\n  const [email, setEmail] = useState(null);\r\n  const [password, setPassword] = useState(null);\r\n\r\n  const login = () => {\r\n    if (!email && !password) return alert(\"please fill in email and password\");\r\n\r\n    axios\r\n      .post(\"/login\", {\r\n        email: email,\r\n        password: password,\r\n      })\r\n      .then(res => {\r\n        if (res.data === \"success\") {\r\n          setAuth(true);\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Login</h1>\r\n      <input\r\n        type='text'\r\n        placeholder='email'\r\n        onChange={e => setEmail(e.target.value)}\r\n      />\r\n      <br />\r\n      <input\r\n        type='password'\r\n        placeholder='password'\r\n        onChange={e => setPassword(e.target.value)}\r\n      />\r\n      <br />\r\n      <button onClick={login}>Login</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction Profile({ setAuth }) {\r\n  const [userInfo, setUserInfo] = useState(null);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"/api/profile\")\r\n      .then(res => setUserInfo(res.data))\r\n      .catch(err => {\r\n        setAuth(false);\r\n        alert(\"please login again\");\r\n      });\r\n  }, []);\r\n\r\n  const logOut = () => {\r\n    setAuth(false);\r\n    axios\r\n      .post(\"/logout\")\r\n      .then(res => console.log(res))\r\n      .catch(err => console.log(err));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Profile page</h1>\r\n      {userInfo ? <h2>Welcome {userInfo.email}</h2> : null}\r\n      <button onClick={logOut}>Log out</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nfunction Register() {\r\n  const [email, setEmail] = useState(null);\r\n  const [password, setPassword] = useState(null);\r\n  const [isRegister, setRegister] = useState(false);\r\n\r\n  const register = () => {\r\n    if (!email && !password) return alert(\"please fill in email and password\");\r\n    axios\r\n      .post(\"/register\", {\r\n        email: email,\r\n        password: password,\r\n      })\r\n      .then(res => {\r\n        alert(\"success\");\r\n        setRegister(true);\r\n      })\r\n      .catch(err => alert(err.message));\r\n  };\r\n\r\n  return isRegister ? (\r\n    <Redirect to='/' />\r\n  ) : (\r\n    <div>\r\n      <h1>Register</h1>\r\n      <input\r\n        type='text'\r\n        placeholder='email'\r\n        onChange={e => setEmail(e.target.value)}\r\n      />\r\n      <br />\r\n      <input\r\n        type='password'\r\n        placeholder='password'\r\n        onChange={e => setPassword(e.target.value)}\r\n      />\r\n      <br />\r\n      <button onClick={register}>Register</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport Login from \"./components/Login\";\nimport Profile from \"./components/Profile\";\nimport Register from \"./components/Register\";\n\nfunction App() {\n  const [isAuthenticated, setAuthenticate] = useState(false);\n\n  useEffect(() => keepLoggedIn(), []);\n\n  const keepLoggedIn = () => {\n    const cookie = document.cookie;\n    const token = cookie.split(\"=\")[1];\n    if (token) {\n      setAuthenticate(true);\n    }\n  };\n\n  return (\n    <div className='App'>\n      <Switch>\n        <Route exact path='/'>\n          {isAuthenticated ? (\n            <Redirect to='/profile' />\n          ) : (\n            <Login setAuth={setAuthenticate} />\n          )}\n        </Route>\n\n        <Route path='/profile'>\n          {isAuthenticated ? (\n            <Profile setAuth={setAuthenticate} />\n          ) : (\n            <Redirect to='/' />\n          )}\n        </Route>\n\n        <Route path='/register'>\n          <Register />\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}